<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store - WishGameStore</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        :root {
            --neon-green: #00ff85;
            --neon-cyan: #00d4ff;
            --dark-bg: #0a0a0e;
            --glass-bg: rgba(255,255,255,0.05);
            --glass-border: rgba(0,255,133,0.2);
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
        }
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--neon-green) var(--dark-bg);
        }
        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }
        /* NAVBAR */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10,10,14,0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
            padding: 1rem 0;
        }
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--neon-green), var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }
        .nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
            list-style: none;
        }
        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }
        .nav-links a:hover, .nav-links a.active {
            color: var(--neon-green);
            text-shadow: 0 0 10px var(--neon-green);
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--neon-green);
            transition: width 0.3s ease;
        }
        .nav-links a:hover::after, .nav-links a.active::after {
            width: 100%;
        }
        .nav-icons {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        .search-icon, .cart-icon {
            font-size: 1.3rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
            position: relative;
        }
        .search-icon:hover, .cart-icon:hover {
            color: var(--neon-green);
            background: var(--glass-bg);
            transform: scale(1.1);
        }
        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--neon-green);
            color: black;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .signin-btn {
            background: linear-gradient(45deg, var(--neon-green), var(--neon-cyan));
            color: black;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0,255,133,0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .signin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,255,133,0.6);
        }
        /* HERO */
        .hero {
            height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            background: linear-gradient(135deg, rgba(0,255,133,0.1), rgba(0,212,255,0.05));
            padding-top: 100px;
        }
        .hero-content {
            max-width: 800px;
            padding: 0 2rem;
        }
        .page-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 900;
            background: linear-gradient(45deg, var(--neon-green), var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        /* STORE CONTAINER */
        .store-container {
            max-width: 1400px;
            margin: 4rem auto;
            padding: 0 2rem;
        }
        /* FILTERS & SORTING */
        .store-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .filter-tabs {
            display: flex;
            gap: 0.5rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 0.5rem;
            flex-wrap: wrap;
        }
        .filter-tab {
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .filter-tab.active {
            background: var(--neon-green);
            color: black;
            box-shadow: 0 5px 15px rgba(0,255,133,0.4);
        }
        .sort-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        .sort-select {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        /* GAMES GRID */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }
        .game-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            cursor: pointer;
        }
        .game-card:hover {
            transform: translateY(-10px);
            border-color: var(--neon-green);
            box-shadow: 0 25px 50px rgba(0,255,133,0.3);
        }
        .game-image {
            height: 220px;
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }
        .game-image.loading {
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        .game-image.loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        .discount-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: linear-gradient(45deg, var(--neon-green), var(--neon-cyan));
            color: black;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
        }
        .edition-tag {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(0,0,0,0.7);
            color: var(--neon-green);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        .game-info {
            padding: 1.8rem;
        }
        .game-name {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
            line-height: 1.3;
        }
        .price-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .new-price {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--neon-green);
        }
        .old-price {
            font-size: 1.2rem;
            text-decoration: line-through;
            color: var(--text-secondary);
        }
        .card-buttons {
            display: flex;
            gap: 0.5rem;
        }
        .buy-btn, .view-btn {
            flex: 1;
            background: linear-gradient(45deg, var(--neon-green), var(--neon-cyan));
            color: black;
            border: none;
            padding: 1rem;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .view-btn {
            background: transparent;
            border: 2px solid var(--neon-green);
            color: var(--neon-green);
        }
        .buy-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,255,133,0.5);
        }
        .view-btn:hover {
            background: var(--neon-green);
            color: black;
        }
        .buy-btn.success {
            background: var(--neon-green);
            animation: pulse 0.6s ease;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        /* PAGINATION */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 4rem;
        }
        .page-btn {
            padding: 1rem 1.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .page-btn:hover, .page-btn.active {
            background: var(--neon-green);
            color: black;
            border-color: var(--neon-green);
        }
        /* FOOTER */
        .footer {
            background: rgba(10,10,14,0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            padding: 3rem 0 1.5rem;
            margin-top: 4rem;
        }
        .footer-bottom {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .store-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-tabs {
                justify-content: center;
            }
            
            .sort-container {
                justify-content: center;
            }
            .card-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-gamepad"></i>
                WishGameStore
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="store.html" class="active">Store</a></li>
                <li><a href="gamepass.html">Game Pass</a></li>
                <li><a href="deals.html">Deals</a></li>
                <li><a href="faq.html">FAQ</a></li>
            </ul>
            <div class="nav-icons">
                <div class="search-icon">
                    <i class="fas fa-search"></i>
                </div>
                <div class="cart-icon" onclick="goToCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-badge" id="cartCount">0</span>
                </div>
                <button class="signin-btn" onclick="window.location.href='login.html'">Sign In</button>
            </div>
        </div>
    </nav>
    <!-- HERO -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="page-title">Game Store</h1>
            <p style="font-size: 1.4rem; color: var(--text-secondary);">Discover 1000+ premium games at unbeatable prices</p>
        </div>
    </section>
    <!-- STORE CONTENT -->
    <div class="store-container">
        <!-- FILTERS & SORTING -->
        <div class="store-controls">
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">All Games</button>
                <button class="filter-tab" data-filter="action">Action</button>
                <button class="filter-tab" data-filter="rpg">RPG</button>
                <button class="filter-tab" data-filter="shooter">Shooter</button>
                <button class="filter-tab" data-filter="adventure">Adventure</button>
            </div>
            <div class="sort-container">
                <label style="color: var(--text-secondary);">Sort by:</label>
                <select class="sort-select" id="sortSelect">
                    <option value="popular">Popularity</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="new">Newest</option>
                </select>
            </div>
        </div>
        <!-- GAMES GRID -->
        <div class="games-grid" id="gamesGrid">
            <!-- GAMES WILL LOAD HERE -->
        </div>
        <!-- PAGINATION -->
        <div class="pagination" id="pagination">
        </div>
    </div>
    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-bottom">
            <p>&copy; 2026 WishGameStore. All rights reserved. | Premium Gaming Marketplace</p>
        </div>
    </footer>
    <script>
        // =====================================================
        // COMPLETE GAME DATABASE
        // =====================================================
        // Game cover image URLs - Using smaller thumbnail versions for faster loading
        const gameCovers = {
            1: 'https://upload.wikimedia.org/wikipedia/en/thumb/a/a5/Grand_Theft_Auto_V.png/220px-Grand_Theft_Auto_V.png',
            2: 'https://upload.wikimedia.org/wikipedia/en/thumb/4/44/Red_Dead_Redemption_II.jpg/220px-Red_Dead_Redemption_II.jpg',
            3: 'https://upload.wikimedia.org/wikipedia/en/thumb/9/9f/Cyberpunk_2077_box_art.jpg/220px-Cyberpunk_2077_box_art.jpg',
            4: 'https://upload.wikimedia.org/wikipedia/en/thumb/b/b9/Elden_Ring_Box_art.jpg/220px-Elden_Ring_Box_art.jpg',
            5: 'https://upload.wikimedia.org/wikipedia/en/thumb/0/05/Call_of_Duty_Modern_Warfare_III_Cover.jpg/220px-Call_of_Duty_Modern_Warfare_III_Cover.jpg',
            6: 'https://upload.wikimedia.org/wikipedia/en/thumb/e/ee/God_of_War_Ragnar%C3%B6k_cover.jpg/220px-God_of_War_Ragnar%C3%B6k_cover.jpg',
            7: 'https://upload.wikimedia.org/wikipedia/en/thumb/4/4f/TLOU_P2_Box_Art_2.png/220px-TLOU_P2_Box_Art_2.png',
            8: 'https://upload.wikimedia.org/wikipedia/en/thumb/6/6d/Starfield_cover.jpg/220px-Starfield_cover.jpg',
            9: 'https://upload.wikimedia.org/wikipedia/en/thumb/d/df/Resident_Evil_4_remake_cover_art.jpg/220px-Resident_Evil_4_remake_cover_art.jpg',
            10: 'https://upload.wikimedia.org/wikipedia/en/thumb/c/c2/Hogwarts_Legacy_cover_art.png/220px-Hogwarts_Legacy_cover_art.png',
            11: 'https://upload.wikimedia.org/wikipedia/en/thumb/9/9d/Cover_Art_of_Doom_Eternal.png/220px-Cover_Art_of_Doom_Eternal.png',
            12: 'https://upload.wikimedia.org/wikipedia/en/thumb/f/fa/Assassin%27s_Creed_Valhalla_cover.jpg/220px-Assassin%27s_Creed_Valhalla_cover.jpg',
            13: 'https://upload.wikimedia.org/wikipedia/en/thumb/3/3a/Spider-Man_Remastered_cover_art.png/220px-Spider-Man_Remastered_cover_art.png',
            14: 'https://upload.wikimedia.org/wikipedia/en/thumb/1/12/Baldur%27s_Gate_3_cover_art.jpg/220px-Baldur%27s_Gate_3_cover_art.jpg',
            15: 'https://upload.wikimedia.org/wikipedia/en/thumb/4/47/Battlefield_2042.jpg/220px-Battlefield_2042.jpg',
            16: 'https://upload.wikimedia.org/wikipedia/en/thumb/7/78/Uncharted_Legacy_of_Thieves_Collection_cover_art.jpg/220px-Uncharted_Legacy_of_Thieves_Collection_cover_art.jpg'
        };
        
        // Image loading cache
        const imageCache = new Map();
        const allGames = [
            { id: 1, name: 'GTA V Premium Edition', price: 799, oldPrice: 4999, discount: 83, image: gameCovers[1], category: 'action', popularity: 1000, edition: 'Premium Edition', platform: 'PC', publisher: 'Rockstar Games', releaseDate: '2013-09-17', description: 'Grand Theft Auto V for PC offers players the option to explore the award-winning world of Los Santos and Blaine County in resolutions of up to 4k and beyond, as well as the chance to experience the game running at 60 frames per second.', features: ['4K Resolution Support', 'First Person Mode', 'Online Multiplayer', 'Open World', 'Story Mode'] },
            { id: 2, name: 'Red Dead Redemption 2', price: 1199, oldPrice: 4999, discount: 75, image: gameCovers[2], category: 'action', popularity: 950, edition: 'Ultimate Edition', platform: 'PC', publisher: 'Rockstar Games', releaseDate: '2019-11-05', description: 'Winner of over 175 Game of the Year Awards and recipient of over 250 perfect scores, Red Dead Redemption 2 is an epic tale of honor and loyalty at the dawn of the modern age.', features: ['Open World', '4K Support', 'HDR', 'Online Mode', 'Story Campaign'] },
            { id: 3, name: 'Cyberpunk 2077', price: 1599, oldPrice: 4999, discount: 67, image: gameCovers[3], category: 'rpg', popularity: 900, edition: 'Ultimate Edition', platform: 'PC', publisher: 'CD Projekt Red', releaseDate: '2020-12-10', description: 'Cyberpunk 2077 is an open-world, action-adventure RPG set in the megalopolis of Night City, where you play as a cyberpunk mercenary wrapped up in a do-or-die fight for survival.', features: ['Ray Tracing', 'Open World', 'Character Customization', 'Multiple Endings', 'Phantom Liberty DLC'] },
            { id: 4, name: 'Elden Ring', price: 1899, oldPrice: 4999, discount: 60, image: gameCovers[4], category: 'rpg', popularity: 850, edition: 'Deluxe Edition', platform: 'PC', publisher: 'Bandai Namco', releaseDate: '2022-02-25', description: 'THE NEW FANTASY ACTION RPG. Rise, Tarnished, and be guided by grace to brandish the power of the Elden Ring and become an Elden Lord in the Lands Between.', features: ['Open World', 'Co-op Multiplayer', 'PvP', 'Character Classes', 'Boss Battles'] },
            { id: 5, name: 'Call of Duty: MW3', price: 2399, oldPrice: 5999, discount: 57, image: gameCovers[5], category: 'shooter', popularity: 800, edition: 'Vault Edition', platform: 'PC', publisher: 'Activision', releaseDate: '2023-11-10', description: 'Call of Duty: Modern Warfare III is the direct sequel to the record-breaking Call of Duty: Modern Warfare II. Captain Price and Task Force 141 face off against the ultimate threat.', features: ['Campaign', 'Multiplayer', 'Zombies', 'Warzone Integration', 'Cross-Platform'] },
            { id: 6, name: 'God of War Ragnarök', price: 2799, oldPrice: 5999, discount: 50, image: gameCovers[6], category: 'action', popularity: 780, edition: 'Deluxe Edition', platform: 'PC', publisher: 'Sony Interactive', releaseDate: '2024-09-19', description: 'Embark on an epic and heartfelt journey as Kratos and Atreus struggle with holding on and letting go. Witness the changing dynamic of their relationship.', features: ['Story Mode', 'Combat System', 'Norse Mythology', 'Boss Battles', 'Exploration'] },
            { id: 7, name: 'The Last of Us Part II', price: 2199, oldPrice: 4999, discount: 53, image: gameCovers[7], category: 'adventure', popularity: 750, edition: 'Remastered', platform: 'PC', publisher: 'Sony Interactive', releaseDate: '2024-04-02', description: 'Experience the devastating physical and emotional journey of Ellie as she pursues vengeance against those who have wronged her.', features: ['Story Driven', 'Stealth Gameplay', 'Crafting System', 'Accessibility Options', 'Photo Mode'] },
            { id: 8, name: 'Starfield', price: 3199, oldPrice: 5999, discount: 43, image: gameCovers[8], category: 'rpg', popularity: 720, edition: 'Premium Edition', platform: 'PC', publisher: 'Bethesda', releaseDate: '2023-09-06', description: 'Starfield is the first new universe in 25 years from Bethesda Game Studios. In this next generation role-playing game set amongst the stars, create any character you want and explore with unparalleled freedom.', features: ['Open World', 'Space Exploration', 'Ship Building', 'Base Building', 'Modding Support'] },
            { id: 9, name: 'Resident Evil 4 Remake', price: 1999, oldPrice: 4999, discount: 58, image: gameCovers[9], category: 'action', popularity: 700, edition: 'Deluxe Edition', platform: 'PC', publisher: 'Capcom', releaseDate: '2023-03-24', description: 'Survival is just the beginning. Six years have passed since the biological disaster in Raccoon City. Leon S. Kennedy, one of the survivors, tracks the presidents kidnapped daughter to a secluded European village.', features: ['Ray Tracing', 'Reimagined Story', 'Modern Controls', 'VR Support', 'New Game Plus'] },
            { id: 10, name: 'Hogwarts Legacy', price: 2499, oldPrice: 5999, discount: 54, image: gameCovers[10], category: 'rpg', popularity: 680, edition: 'Deluxe Edition', platform: 'PC', publisher: 'Warner Bros', releaseDate: '2023-02-10', description: 'Hogwarts Legacy is an immersive, open-world action RPG. Your legacy is what you make of it. Live the unwritten.', features: ['Open World', 'Spell Casting', 'Character Creator', 'House Selection', 'Magical Beasts'] },
            { id: 11, name: 'DOOM Eternal', price: 1599, oldPrice: 3499, discount: 50, image: gameCovers[11], category: 'shooter', popularity: 650, edition: 'Deluxe Edition', platform: 'PC', publisher: 'Bethesda', releaseDate: '2020-03-20', description: 'Hells armies have invaded Earth. Become the Slayer in an epic single-player campaign to conquer demons across dimensions and stop the final destruction of humanity.', features: ['Fast Combat', 'Glory Kills', 'Multiplayer', 'DLC Campaigns', 'Master Levels'] },
            { id: 12, name: 'Assassins Creed Valhalla', price: 1799, oldPrice: 4999, discount: 61, image: gameCovers[12], category: 'action', popularity: 620, edition: 'Complete Edition', platform: 'PC', publisher: 'Ubisoft', releaseDate: '2020-11-10', description: 'Become Eivor, a legendary Viking raider on a quest for glory. Explore Englands Dark Ages as you raid your enemies, grow your settlement, and build your political power.', features: ['Open World', 'Viking Combat', 'Settlement Building', 'Raids', 'Multiple DLCs'] },
            { id: 13, name: 'Spider-Man Remastered', price: 3599, oldPrice: 5999, discount: 36, image: gameCovers[13], category: 'action', popularity: 600, edition: 'Remastered', platform: 'PC', publisher: 'Sony Interactive', releaseDate: '2022-08-12', description: 'In Marvels Spider-Man Remastered, the worlds of Peter Parker and Spider-Man collide in an original, action-packed story. Play as an experienced Peter Parker, fighting big crime and iconic villains in Marvels New York.', features: ['Open World NYC', 'Web Swinging', 'Suit Collection', 'Ray Tracing', 'Photo Mode'] },
            { id: 14, name: 'Baldurs Gate 3', price: 3999, oldPrice: 4999, discount: 17, image: gameCovers[14], category: 'rpg', popularity: 580, edition: 'Digital Deluxe', platform: 'PC', publisher: 'Larian Studios', releaseDate: '2023-08-03', description: 'Gather your party and return to the Forgotten Realms in a tale of fellowship and betrayal, sacrifice and survival, and the lure of absolute power.', features: ['Turn-Based Combat', 'Co-op Multiplayer', 'Character Creation', 'Multiple Endings', 'Romance Options'] },
            { id: 15, name: 'Battlefield 2042', price: 2099, oldPrice: 4999, discount: 54, image: gameCovers[15], category: 'shooter', popularity: 550, edition: 'Gold Edition', platform: 'PC', publisher: 'EA', releaseDate: '2021-11-19', description: 'Battlefield 2042 is a first-person shooter that marks the return to the iconic all-out warfare of the franchise. Adapt and overcome in a near-future world transformed by disorder.', features: ['128 Players', 'All-Out Warfare', 'Portal Mode', 'Hazard Zone', 'Specialists'] },
            { id: 16, name: 'Uncharted Legacy of Thieves', price: 2299, oldPrice: 3999, discount: 42, image: gameCovers[16], category: 'adventure', popularity: 520, edition: 'Collection', platform: 'PC', publisher: 'Sony Interactive', releaseDate: '2022-10-19', description: 'Seek your legacy and leave your mark on the map in UNCHARTED: Legacy of Thieves Collection. Includes UNCHARTED 4: A Thiefs End and UNCHARTED: The Lost Legacy.', features: ['Two Games', 'Remastered Graphics', 'Photo Mode', 'Accessibility', 'PC Optimized'] }
        ];
        // Store games in window for product page access
        window.ALL_GAMES = allGames;
        localStorage.setItem('wishgamestore_products', JSON.stringify(allGames));
        let cart = JSON.parse(localStorage.getItem('wishgamestore_cart')) || [];
        let filteredGames = [...allGames];
        let currentSort = 'popular';
        let currentFilter = 'all';
        let currentPage = 1;
        const gamesPerPage = 12;
        // =====================================================
        // CART FUNCTIONS
        // =====================================================
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            const badge = document.getElementById('cartCount');
            if (badge) {
                badge.textContent = count || 0;
                badge.style.display = count > 0 ? 'flex' : 'none';
            }
        }
        function addToCart(productId, event) {
            if (event) event.stopPropagation();
            const product = allGames.find(game => game.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ 
                    id: productId, 
                    name: product.name, 
                    price: product.price, 
                    image: product.image, 
                    quantity: 1 
                });
            }
            
            saveCart();
            updateCartCount();
            
            // Visual feedback
            const btn = event ? event.target : null;
            if (btn) {
                const originalText = btn.textContent;
                btn.textContent = 'Added! ✅';
                btn.classList.add('success');
                setTimeout(() => {
                    btn.textContent = 'Add to Cart';
                    btn.classList.remove('success');
                }, 1500);
            }
        }
        function saveCart() {
            localStorage.setItem('wishgamestore_cart', JSON.stringify(cart));
        }
        function goToCart() {
            window.location.href = 'cart.html';
        }
        function viewProduct(productId) {
            window.location.href = `product.html?id=${productId}`;
        }
        // =====================================================
        // FILTER & SORT FUNCTIONS
        // =====================================================
        function filterGames(filter) {
            currentFilter = filter;
            currentPage = 1;
            if (filter === 'all') {
                filteredGames = [...allGames];
            } else {
                filteredGames = allGames.filter(game => game.category === filter);
            }
            sortGames();
            renderGames();
        }
        function sortGames() {
            filteredGames.sort((a, b) => {
                switch (currentSort) {
                    case 'price-low': return a.price - b.price;
                    case 'price-high': return b.price - a.price;
                    case 'new': return b.id - a.id;
                    default: return b.popularity - a.popularity;
                }
            });
        }
        function renderGames() {
            const startIndex = (currentPage - 1) * gamesPerPage;
            const endIndex = startIndex + gamesPerPage;
            const pageGames = filteredGames.slice(startIndex, endIndex);
            
            const gamesGrid = document.getElementById('gamesGrid');
            gamesGrid.innerHTML = pageGames.map(game => `
                <div class="game-card" onclick="viewProduct(${game.id})">
                    <div class="game-image loading" data-src="${game.image}" id="img-${game.id}">
                        <div class="discount-badge">-${game.discount}%</div>
                        <div class="edition-tag">${game.edition}</div>
                    </div>
                    <div class="game-info">
                        <div class="game-name">${game.name}</div>
                        <div class="price-container">
                            <span class="new-price">₹${game.price.toLocaleString('en-IN')}</span>
                            <span class="old-price">₹${game.oldPrice.toLocaleString('en-IN')}</span>
                        </div>
                        <div class="card-buttons">
                            <button class="buy-btn" onclick="addToCart(${game.id}, event)">Add to Cart</button>
                            <button class="view-btn" onclick="viewProduct(${game.id}); event.stopPropagation();">View</button>
                        </div>
                    </div>
                </div>
            `).join('');
            // Lazy load images
            lazyLoadImages();
            renderPagination();
        }
        
        // Lazy load images with Intersection Observer
        function lazyLoadImages() {
            const imageElements = document.querySelectorAll('.game-image[data-src]');
            
            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const element = entry.target;
                            const src = element.dataset.src;
                            
                            // Load image
                            loadImage(src).then(() => {
                                element.style.backgroundImage = `url('${src}')`;
                                element.classList.remove('loading');
                            }).catch(() => {
                                // Fallback gradient if image fails
                                element.classList.remove('loading');
                            });
                            
                            observer.unobserve(element);
                        }
                    });
                }, { rootMargin: '50px' });
                
                imageElements.forEach(el => observer.observe(el));
            } else {
                // Fallback for older browsers
                imageElements.forEach(element => {
                    const src = element.dataset.src;
                    element.style.backgroundImage = `url('${src}')`;
                    element.classList.remove('loading');
                });
            }
        }
        
        // Preload image and cache
        function loadImage(src) {
            if (imageCache.has(src)) {
                return Promise.resolve(imageCache.get(src));
            }
            
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => {
                    imageCache.set(src, src);
                    resolve(src);
                };
                img.onerror = reject;
                img.src = src;
            });
        }
        function renderPagination() {
            const totalPages = Math.ceil(filteredGames.length / gamesPerPage);
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            let html = '';
            for (let i = 1; i <= totalPages; i++) {
                html += `<button class="page-btn ${currentPage === i ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
            }
            pagination.innerHTML = html;
        }
        function changePage(page) {
            currentPage = page;
            renderGames();
            window.scrollTo({ top: 400, behavior: 'smooth' });
        }
        // =====================================================
        // EVENT LISTENERS
        // =====================================================
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            renderGames();
            // Filter tabs
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.onclick = () => {
                    document.querySelector('.filter-tab.active').classList.remove('active');
                    tab.classList.add('active');
                    filterGames(tab.dataset.filter);
                };
            });
            // Sort select
            document.getElementById('sortSelect').onchange = (e) => {
                currentSort = e.target.value;
                sortGames();
                renderGames();
            };
        });
    </script>
</body>
</html>
